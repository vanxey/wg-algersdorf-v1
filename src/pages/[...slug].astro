---
import { useStoryblokApi } from "@storyblok/astro";
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";
import Layout from "../layouts/Layout.astro";

const { slug } = Astro.params;
const storyblokApi = useStoryblokApi()
const storyPath = slug === undefined ? 'home' : slug;

const { data } = await storyblokApi.get(`cdn/stories/${storyPath}`, {
  version: "draft",
});

const { story } = data;
---

<Layout>
  <StoryblokComponent blok={story.content} />
</Layout>
